<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>USACO Broken Necklace</title>
  <meta name="description" content="USACO Broken Necklace题解分析">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="/jekyll/update/2017/08/31/USACO-Broken-Necklace.html">
  <link rel="alternate" type="application/rss+xml" title="BLOG|LEXUGE" href="/feed.xml">
  
  
    <style>
        body {
	    width:100%;
	    height:100%;
            background: #f7fafc none repeat scroll 0 0;
            color: #555;
            font-family: "Helvetica Neue",Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",Arial,sans-serif;
            font-size: 15px;
            line-height: 1.7;
        }


        #particles {
            position: fixed;
            top: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
    </style>
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">

    <a class="site-title" href="/">BLOG|LEXUGE</a>

    <nav class="site-nav">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </span>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
          <a class="page-link" href="/tags/">Tags</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

        <!-- Html Elements for Search -->
        <div class="dropdown navbar-form navbar-right ">
        <input  id="dLabel" name="word" type="text"  aria-haspopup="true" aria-expanded="false" data-toggle="dropdown" class="form-control typeahead"   placeholder="搜索">
        <ul class="dropdown-menu" aria-labelledby="dLabel" id="c">
           <li><a href="#" onclick="return false;">搜索任意关键词</a></li>
        </ul>
        </div>

          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

        <!-- Script pointing to jekyll-search.js -->
        <script src="/jekyll-search.js" type="text/javascript"></script>
        
         <script type="text/javascript">
           SimpleJekyllSearch({
             searchInput: document.getElementById('dLabel'),
             resultsContainer: document.getElementById('c'),
             json: '/search.json',
             searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
             noResultsText: '<li><a href="#" onclick="return false;">搜索任意关键词</a></li>',
             limit: 33,
             fuzzy: false,
             exclude: ['Welcome']
           })
         </script>
      </div>
    </nav>

  </div>

</header>

   <div id="particles"></div>

    <script src="/particles.js"></script>

    <script type="text/javascript">
        particlesJS("particles", {
            "particles": {
                "number": {
                    "value": 20,
                    "density": {
                        "enable": true,
                        "value_area": 1E3
                    }
                },
                "color": {
                    "value": "#e1e1e1"
                },
                "shape": {
                    "type": "circle",
                    "stroke": {
                        "width": 0,
                        "color": "#000000"
                    },
                    "polygon": {
                        "nb_sides": 5
                    },
                    "image": {
                        "src": "img/github.svg",
                        "width": 100,
                        "height": 100
                    }
                },
                "opacity": {
                    "value": 0.5,
                    "random": false,
                    "anim": {
                        "enable": false,
                        "speed": 1,
                        "opacity_min": 0.1,
                        "sync": false
                    }
                },
                "size": {
                    "value": 15,
                    "random": true,
                    "anim": {
                        "enable": false,
                        "speed": 180,
                        "size_min": 0.1,
                        "sync": false
                    }
                },
                "line_linked": {
                    "enable": true,
                    "distance": 650,
                    "color": "#cfcfcf",
                    "opacity": 0.26,
                    "width": 1
                },
                "move": {
                    "enable": true,
                    "speed": 2,
                    "direction": "none",
                    "random": false,
                    "straight": false,
                    "out_mode": "out",
                    "bounce": false,
                    "attract": {
                        "enable": false,
                        "rotateX": 600,
                        "rotateY": 1200
                    }
                }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": {
                    "onhover": {
                        "enable": false,
                        "mode": "repulse"
                    },
                    "onclick": {
                        "enable": true,
                        "mode": "push"
                    },
                    "resize": true
                },
                "modes": {
                    "grab": {
                        "distance": 400,
                        "line_linked": {
                            "opacity": 1
                        }
                    },
                    "bubble": {
                        "distance": 400,
                        "size": 40,
                        "duration": 2,
                        "opacity": 8,
                        "speed": 3
                    },
                    "repulse": {
                        "distance": 200,
                        "duration": 0.4
                    },
                    "push": {
                        "particles_nb": 4
                    },
                    "remove": {
                        "particles_nb": 2
                    }
                }
            },
            "retina_detect": true
        }
);
    </script>
    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <br>
        
        <span class="date">August 31, 2017</span>
        
          <a href="/tags/#%E7%BC%96%E7%A8%8B">编程</a>
        
          <a href="/tags/#%E7%AE%97%E6%B3%95">算法</a>
        
          <a href="/tags/#OI">OI</a>
        
          <a href="/tags/#USACO">USACO</a>
        
        <br>
        <hr>
        <br>
        
        <blockquote>
  <p>USACO Broken Necklace题解分析</p>
</blockquote>

<p>1.题目</p>

<ul>
  <li>Description<br />
You have a necklace of N red, white, or blue beads (3&lt;=N&lt;=350) some of which are red, others blue, and others white, arranged at random. Here are two examples for n=29:
    <div class="highlighter-rouge"><pre class="highlight"><code>
              1 2                               1 2  
          r b b r                           b r r b  
        r         b                       b         b  
       r           r                     b           r  
      r             r                   w             r  
     b               r                 w               w  
    b                 b               r                 r  
    b                 b               b                 b  
    b                 b               r                 b  
     r               r                 b               r  
      b             r                   r             r  
       b           r                     r           r  
         r       r                         r       b  
           r b r                             r r w  
          Figure A                         Figure B  
                      r red bead  
                      b blue bead  
                      w white bead  
</code></pre>
    </div>
    <p>The beads considered first and second in the text that follows have been marked in the picture.<br />
The configuration in Figure A may be represented as a string of b’s and r’s, where b represents a blue bead and r represents a red one, as follows: brbrrrbbbrrrrrbrrbbrbbbbrrrrb .<br />
Suppose you are to break the necklace at some point, lay it out straight, and then collect beads of the same color from one end until you reach a bead of a different color, and do the same for the other end (which might not be of the same color as the beads collected before this).<br />
Determine the point where the necklace should be broken so that the most number of beads can be collected.</p>
  </li>
  <li>
    <p>Example<br />
For example, for the necklace in Figure A, 8 beads can be collected, with the breaking point either between bead 9 and bead 10 or else between bead 24 and bead 25.<br />
In some necklaces, white beads had been included as shown in Figure B above. When collecting beads, a white bead that is encountered may be treated as either red or blue and then painted with the desired color. The string that represents this configuration can include any of the three symbols r, b and w.<br />
Write a program to determine the largest number of beads that can be collected from a supplied necklace.</p>
  </li>
  <li>INPUT FORMAT<br />
Line 1:	N, the number of beads<br />
Line 2:	a string of N characters, each of which is r, b, or w<br />
SAMPLE INPUT (file beads.in)
    <div class="highlighter-rouge"><pre class="highlight"><code>29
wwwbbrwrbrbrrbrbrwrwwrbwrwrrb
</code></pre>
    </div>
  </li>
  <li>OUTPUT FORMAT<br />
A single line containing the maximum of number of beads that can be collected from the supplied necklace.<br />
SAMPLE OUTPUT (file beads.out)
    <div class="highlighter-rouge"><pre class="highlight"><code>11
</code></pre>
    </div>
  </li>
  <li>OUTPUT EXPLANATION<br />
Consider two copies of the beads (kind of like being able to runaround the ends). The string of 11 is marked.
    <div class="highlighter-rouge"><pre class="highlight"><code>              Two necklace copies joined here
                           v
wwwbbrwrbrbrrbrbrwrwwrbwrwrrb|wwwbbrwrbrbrrbrbrwrwwrbwrwrrb
                     ******|*****
                     rrrrrb|bbbbb  &lt;-- assignments
                 5xr .....#|#####  6xb

                      5+6 = 11 total
</code></pre>
    </div>
    <p><br /></p>
  </li>
</ul>
<hr />

<p>2.思路与想法<br />
题目的OUTPUT EXPLANATION已经给我们了提示，需要将字符串*2形成环状效果。<br />
本题的解法就是枚举。对所有的切口进行枚举，设切口的左边bead为p，那么从p+n开始往左数，为pre；以p+1开始向右数为post。<br />
如下，necklace为<code class="highlighter-rouge">wrwwwwrwrbbbw</code>,设切口在第3个与第四个bead之间，那么p=3。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>        pre的范围
  切口      v   p+n
   v ~~~~~~~~~~~v
wrw|wwwrwrbbbwwrwwwwrwrbbbw
    ^
    p+1 (post的范围为p+1到pre的范围)
</code></pre>
</div>
<p>为保证最终结果&lt;=n，所以必须确定范围。范围如上图所示。可以证明pre+post&lt;=n（最大为p+n-p-1+1)<br />
有一个小的点需要注意。就是如果切口处向左或向右为w(white)的情况。<br />
这种情况下，你需要painted with the desired color，也就是说，在循环的过程中寻找第一个不是w的bead并且将w涂上它的颜色。虽然你不考虑这个，进行一些其他的考虑也能AC，但是算法是错的，AC也没有什么意义。<br />
<br /></p>
<hr />

<p>C程序实现：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cm">/*
ID: lexugey1
LANG: C
PROG: beads
*/</span>
<span class="cp">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
</span>
<span class="kt">int</span> <span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">s</span><span class="p">[</span><span class="mi">350</span><span class="p">],</span><span class="n">s1</span><span class="p">[</span><span class="mi">700</span><span class="p">];</span>

<span class="kt">int</span> <span class="nf">get_beads</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">pre</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">post</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">flag</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
  <span class="n">i</span><span class="o">=</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="n">j</span><span class="o">=</span><span class="n">p</span><span class="o">+</span><span class="n">n</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

  <span class="n">c</span><span class="o">=</span><span class="n">s1</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
  <span class="k">while</span> <span class="p">((</span><span class="n">flag</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;</span><span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">c</span><span class="o">==</span><span class="sc">'w'</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">!=</span><span class="sc">'w'</span><span class="p">))</span> <span class="n">c</span><span class="o">=</span><span class="n">s1</span><span class="p">[</span><span class="n">j</span><span class="p">];</span> <span class="c1">//涂色处理
</span>    <span class="k">if</span> <span class="p">((</span><span class="n">s1</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">==</span><span class="n">c</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">==</span><span class="sc">'w'</span><span class="p">))</span> <span class="n">pre</span><span class="o">++</span><span class="p">;</span>
    <span class="k">else</span> <span class="n">flag</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">j</span><span class="o">--</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">j</span><span class="o">++</span><span class="p">;</span>
  <span class="n">c</span><span class="o">=</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
  <span class="n">flag</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">((</span><span class="n">flag</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="n">j</span><span class="p">))</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">c</span><span class="o">==</span><span class="sc">'w'</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">!=</span><span class="sc">'w'</span><span class="p">))</span> <span class="n">c</span><span class="o">=</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="c1">//涂色处理
</span>    <span class="k">if</span> <span class="p">((</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="n">c</span><span class="p">)</span><span class="o">||</span><span class="p">(</span><span class="n">s1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="sc">'w'</span><span class="p">))</span> <span class="n">post</span><span class="o">++</span><span class="p">;</span>
    <span class="k">else</span> <span class="n">flag</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">i</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">pre</span><span class="o">+</span><span class="n">post</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">max</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

  <span class="kt">FILE</span> <span class="o">*</span><span class="n">fin</span>  <span class="o">=</span> <span class="n">fopen</span> <span class="p">(</span><span class="s">"beads.in"</span><span class="p">,</span> <span class="s">"r"</span><span class="p">);</span>
  <span class="kt">FILE</span> <span class="o">*</span><span class="n">fout</span> <span class="o">=</span> <span class="n">fopen</span> <span class="p">(</span><span class="s">"beads.out"</span><span class="p">,</span> <span class="s">"w"</span><span class="p">);</span>
  <span class="c1">// FILE *fin  = stdin;
</span>  <span class="c1">// FILE *fout = stdout;
</span>
  <span class="n">fscanf</span><span class="p">(</span><span class="n">fin</span><span class="p">,</span><span class="s">"%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
  <span class="n">fscanf</span><span class="p">(</span><span class="n">fin</span><span class="p">,</span><span class="s">"%s"</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span>
  <span class="n">strcat</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="n">s</span><span class="p">);</span>
  <span class="n">strcat</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="n">s</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">get_beads</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">&gt;</span><span class="n">max</span><span class="p">)</span> <span class="n">max</span><span class="o">=</span><span class="n">get_beads</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">fprintf</span><span class="p">(</span><span class="n">fout</span><span class="p">,</span><span class="s">"%d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">max</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

</code></pre>
</div>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">BLOG|LEXUGE</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              BLOG|LEXUGE
            
            </li>
            
            <li><a href="mailto:LEXUGEyky@outlook.com">LEXUGEyky@outlook.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/LEXUGE"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">LEXUGE</span></a>

          </li>
          

          
          <li>
            <a href="https://t.me/lex_channel"><span class="icon icon--telegram"><?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="18px" height="18px" viewBox="0 0 260.000000 260.000000"
 preserveAspectRatio="xMidYMid meet">

<g transform="translate(0.000000,260.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M1155 2374 c-228 -36 -431 -135 -594 -289 -400 -378 -453 -989 -123
-1430 229 -308 607 -470 990 -426 127 15 195 32 295 76 374 161 615 493 658
905 12 120 2 218 -37 369 -97 372 -395 669 -772 768 -77 20 -126 26 -242 28
-80 2 -158 1 -175 -1z m727 -501 c10 -9 18 -30 18 -48 0 -26 -110 -563 -206
-1003 -17 -80 -40 -112 -78 -112 -15 0 -87 46 -194 125 -94 69 -174 125 -178
125 -4 0 -49 -40 -100 -90 -92 -90 -127 -109 -151 -77 -5 6 -33 84 -61 172
-28 88 -57 178 -64 199 l-13 39 -169 53 c-93 29 -175 59 -184 68 -13 13 -13
17 1 40 12 18 58 40 174 86 303 117 440 171 783 304 190 73 358 134 374 135
16 0 38 -6 48 -16z"/>
<path d="M1270 1456 c-195 -124 -356 -229 -358 -234 -3 -11 97 -323 108 -335
4 -5 11 42 15 103 6 94 11 115 29 135 11 13 148 138 304 279 156 140 283 258
283 263 0 4 -6 9 -13 10 -7 2 -173 -98 -368 -221z"/>
</g>
</svg>
</span><span class="username">@lex_channel</span></a>

          </li>
          


          
        </ul>
      </div>
       <div class="footer-col footer-col-3">
        <p>即使被全世界孤立，也要一个人笑得精彩！</p>
       </div>
      </div>
      <center><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />本站所有作品（软件包及源代码除外）除特殊声明全部采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可</center>
<br>

  </div>

</footer>


  </body>

</html>
